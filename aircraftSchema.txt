# Supabase Aircraft Schema Summary

## Tables

### 1. aircraft
- **id** (uuid, PK): Unique aircraft ID
- **organization_id** (uuid, FK): Organization that owns the aircraft
- **registration** (text): Aircraft registration (e.g., ZK-ABC)
- **type** (text): Aircraft type/model
- **manufacturer** (text, nullable): Manufacturer
- **year_manufactured** (integer, nullable): Year built
- **total_hours** (numeric): Total airframe hours
- **last_maintenance_date** (timestamptz, nullable): Last maintenance
- **next_maintenance_date** (timestamptz, nullable): Next scheduled maintenance
- **status** (text): Status (e.g., active, maintenance)
- **capacity** (integer, nullable): Number of seats
- **current_tach** (numeric): Current tachometer reading
- **current_hobbs** (numeric): Current Hobbs meter reading
- **record_tacho** (boolean): Track tacho?
- **record_hobbs** (boolean): Track Hobbs?
- **record_airswitch** (boolean): Track airswitch?
- **on_line** (boolean): Is aircraft online?
- **for_ato** (boolean): For ATO use?
- **fuel_consumption** (integer, nullable): Fuel burn (L/hr)
- **engine_count** (integer): Number of engines
- **prioritise_scheduling** (boolean): Priority for scheduling
- **aircraft_image_url** (text, nullable): Image URL
- **created_at/updated_at** (timestamptz): Timestamps

#### Relationships
- `organization_id` → organizations.id
- Referenced by: aircraft_equipment.aircraft_id, aircraft_tech_log.aircraft_id, bookings.aircraft_id, defects.aircraft_id, aircraft_charge_rates.aircraft_id

---

### 2. aircraft_equipment
- **id** (uuid, PK): Unique equipment ID
- **aircraft_id** (uuid, FK): Linked aircraft
- **name** (text): Equipment name
- **description** (text, nullable): Description
- **due_at_hours** (numeric, nullable): Due at airframe hours
- **due_at_date** (timestamptz, nullable): Due at date
- **last_completed_hours** (numeric, nullable): Last completed at hours
- **last_completed_date** (timestamptz, nullable): Last completed at date
- **organization_id** (uuid, FK): Owning org
- **created_at/updated_at** (timestamptz): Timestamps

#### Relationships
- `aircraft_id` → aircraft.id
- `organization_id` → organizations.id

---

### 3. aircraft_tech_log
- **id** (uuid, PK): Unique log entry
- **aircraft_id** (uuid, FK): Linked aircraft
- **entry_type** (text): Type (e.g., maintenance, defect)
- **description** (text): Log description
- **tach** (numeric, nullable): Tach reading
- **hobbs** (numeric, nullable): Hobbs reading
- **created_by** (uuid, FK, nullable): User who created
- **created_at** (timestamptz): Timestamp

#### Relationships
- `aircraft_id` → aircraft.id
- `created_by` → users.id

---

## Relationships Overview
- **aircraft** is the parent for both **aircraft_equipment** and **aircraft_tech_log** (1-to-many)
- **aircraft_equipment** and **aircraft_tech_log** both reference **aircraft** by `aircraft_id`
- All tables are multi-tenant via `organization_id`
- **aircraft_tech_log.created_by** references **users**

---

## Usage Notes
- RLS (Row Level Security) is enabled for all tables for secure, role-based access.
- Use joins on `aircraft_id` to fetch all equipment or tech log entries for a given aircraft.
- Use `organization_id` to scope queries to the current tenant/org.
